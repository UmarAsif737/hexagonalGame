(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{32:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(16),u=n.n(r),l=n(1),s=n(7),o=n.n(s),i=n(15),j=n(14),h=n(8),v=n(3),b=n(11),x=n.n(b),d=(n(32),n(0)),f=function(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),u=Object(h.a)(r,2),s=u[0],b=u[1],f=Object(a.useRef)(null),O=Object(a.useState)(2),y=Object(h.a)(O,2),p=y[0],m=y[1],g=Object(a.useState)("Select radius"),z=Object(h.a)(g,2),k=z[0],N=z[1],w=Object(a.useCallback)((function(e){e.map((function(t){return e.filter((function(e){return(t.x!==e.x||t.y!==e.y||t.z!==e.z)&&((t.x===e.x-1||t.x===e.x+1||t.x===e.x)&&(t.y===e.y-1||t.y===e.y+1||t.y===e.y)&&(t.z===e.z-1||t.z===e.z+1||t.z===e.z))})).some((function(e){return t.value===e.value}))})).every((function(e){return!e}))&&N("game-over")}),[]),C=Object(a.useCallback)((function(e){for(var t=[],n=-e;n<=e;n++)for(var a=-e;a<=e;a++)n-a<e+1&&n-a>-(e+1)&&t.push({x:n,y:-a,z:-n+a,value:0});return t}),[]),S=Object(a.useCallback)(function(){var e=Object(j.a)(o.a.mark((function e(t){var a,c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.map((function(e){return t.some((function(t){return e.x===t.x&&e.y===t.y&&e.value===t.value}))})).every((function(e){return e}))){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,fetch("".concat(f.current.value,"/").concat(p),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 5:return a=e.sent,e.next=8,a.json();case 8:c=e.sent,r=[].concat(Object(i.a)(t),Object(i.a)(c)),b(r),n.length===r.length&&w(r);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s,w,n.length,p]),_=Object(a.useCallback)((function(e,t){var n=p-1;return"w"===t||"e"===t||"d"===t?e<=0?n:n-e:"s"===t||"q"===t||"a"===t?e>=0?-n:-n-e:void 0}),[p]),E=Object(a.useCallback)((function(e){var t=s.sort((function(t,n){return"w"===e?t.y<n.y?1:-1:t.y>n.y?1:-1})).map((function(t){var n=t.x,a=_(n,e);return Object(l.a)(Object(l.a)({},t),{},{y:a,z:-n-a,oldX:t.x,oldY:t.y,oldZ:t.z})})).reduce((function(e,t){if(0===e.length)return e.push([t]),e;for(var n=0;n<e.length;n++)if(t.x===e[n][0].x&&t.y===e[n][0].y)return e[n].push(t),e;return e.push([t]),e}),[]).map((function(t){if(1===t.length)return t[0];var n=[],a=[];return t.forEach((function(c,r){if(!n.some((function(e){return e===r}))){var u;if(a.length>0&&(u="w"===e?a[a.length-1].y-1:a[a.length-1].y+1),r!==t.length-1)return c.value===t[r+1].value?(n.push(r+1),a.length>0?void a.push(Object(l.a)(Object(l.a)({},c),{},{y:u,z:-c.x-u,value:c.value+t[r+1].value})):void a.push(Object(l.a)(Object(l.a)({},c),{},{value:c.value+t[r+1].value}))):void(0!==r?a.push(Object(l.a)(Object(l.a)({},c),{},{y:u,z:-c.x-u})):a.push(c));a.push(Object(l.a)(Object(l.a)({},c),{},{y:u,z:-c.x-u}))}})),a}));S(t.flat())}),[s,S,_]),q=Object(a.useCallback)((function(e){var t=s.sort((function(t,n){return"e"===e?t.x<n.x?1:-1:t.x>n.x?1:-1})).map((function(t){var n=t.y,a=_(n,e);return Object(l.a)(Object(l.a)({},t),{},{x:a,z:-a-n,oldX:t.x,oldY:t.y,oldZ:t.z})})).reduce((function(e,t){if(0===e.length)return e.push([t]),e;for(var n=0;n<e.length;n++)if(t.x===e[n][0].x&&t.y===e[n][0].y)return e[n].push(t),e;return e.push([t]),e}),[]).map((function(t){if(1===t.length)return t[0];var n=[],a=[];return t.forEach((function(c,r){if(!n.some((function(e){return e===r}))){var u;if(a.length>0&&(u="e"===e?a[a.length-1].x-1:a[a.length-1].x+1),r!==t.length-1)return c.value===t[r+1].value?(n.push(r+1),a.length>0?void a.push(Object(l.a)(Object(l.a)({},c),{},{x:u,z:-c.y-u,value:c.value+t[r+1].value})):void a.push(Object(l.a)(Object(l.a)({},c),{},{value:c.value+t[r+1].value}))):void(0!==r?a.push(Object(l.a)(Object(l.a)({},c),{},{x:u,z:-c.y-u})):a.push(c));a.push(Object(l.a)(Object(l.a)({},c),{},{x:u,z:-c.y-u}))}})),a}));S(t.flat())}),[s,S,_]),T=Object(a.useCallback)((function(e){var t=s.sort((function(t,n){return"d"===e?t.x<n.x?1:-1:t.x>n.x?1:-1})).map((function(t){var n=t.z,a=_(n,e);return Object(l.a)(Object(l.a)({},t),{},{x:a,y:-a-n,oldX:t.x,oldY:t.y,oldZ:t.z})})).reduce((function(e,t){if(0===e.length)return e.push([t]),e;for(var n=0;n<e.length;n++)if(t.x===e[n][0].x&&t.y===e[n][0].y)return e[n].push(t),e;return e.push([t]),e}),[]).map((function(t){if(1===t.length)return t[0];var n=[],a=[];return t.forEach((function(c,r){if(!n.some((function(e){return e===r}))){var u;if(a.length>0&&(u="d"===e?a[a.length-1].x-1:a[a.length-1].x+1),r!==t.length-1)return c.value===t[r+1].value?(n.push(r+1),a.length>0?void a.push(Object(l.a)(Object(l.a)({},c),{},{x:u,y:-c.z-u,value:c.value+t[r+1].value})):void a.push(Object(l.a)(Object(l.a)({},c),{},{value:c.value+t[r+1].value}))):void(0!==r?a.push(Object(l.a)(Object(l.a)({},c),{},{x:u,y:-c.z-u})):a.push(c));a.push(Object(l.a)(Object(l.a)({},c),{},{x:u,y:-c.z-u}))}})),a}));S(t.flat())}),[s,S,_]),H=Object(a.useCallback)((function(e){"q"!==e.key&&"d"!==e.key?"w"!==e.key&&"s"!==e.key?"e"!==e.key&&"a"!==e.key||q(e.key):E(e.key):T(e.key)}),[E,q,T]);Object(a.useEffect)((function(){return document.addEventListener("keypress",H),function(){return document.removeEventListener("keypress",H)}}),[H]);var L=Object(a.useCallback)(function(){var e=Object(j.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.innerText,m(n),N("playing"),c(C(Number(n)-1)),e.next=6,fetch("".concat(f.current.value,"/").concat(n),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify([])});case 6:return a=e.sent,e.next=9,a.json();case 9:r=e.sent,b(r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[C]);return Object(d.jsxs)("div",{className:"app",children:[Object(d.jsxs)("div",{className:"controls",children:[Object(d.jsx)("div",{children:"RNG-server url"}),Object(d.jsxs)("select",{id:"url-server",ref:f,children:[Object(d.jsx)("option",{id:"remote",value:"//68f02c80-3bed-4e10-a747-4ff774ae905a.pub.instances.scw.cloud",children:"Remote server"}),Object(d.jsx)("option",{id:"localhost",value:"http://localhost:13337",children:"Local server"})]}),Object(d.jsxs)("div",{className:"buttons",children:["Select radius:",Object(d.jsx)("button",{className:"button",onClick:L,type:"button",children:"2"}),Object(d.jsx)("button",{className:"button",onClick:L,type:"button",children:"3"}),Object(d.jsx)("button",{className:"button",onClick:L,type:"button",children:"4"})]})]}),Object(d.jsxs)("div",{className:"status__text",children:["Game Status: ",Object(d.jsx)("span",{"data-status":k,children:k})]}),"playing"===k&&Object(d.jsx)("div",{className:"rules__text",children:"Use q, w, e, a, s, d keys for move"}),Object(d.jsxs)("div",{className:"field",children:[Object(d.jsx)("div",{className:"hexgrid",children:Object(d.jsx)(v.HexGrid,{width:800,height:800,children:Object(d.jsx)(v.Layout,{size:{x:7,y:7},flat:!0,origin:{x:0,y:0},children:n.map((function(e){return s.find((function(t){return t.x===e.x&&t.y===e.y&&t.z===e.z}))?Object(d.jsx)(v.Hexagon,{className:"hex__empty",q:e.x,r:e.z,s:e.y}):Object(d.jsx)(v.Hexagon,{className:"hex__empty",q:e.x,r:e.z,s:e.y,children:Object(d.jsx)("g",{"data-x":e.x,"data-y":e.y,"data-z":e.z,"data-value":"0"})})}))})})}),Object(d.jsx)("div",{className:"hexgrid__values",children:Object(d.jsx)(v.HexGrid,{width:800,height:800,children:Object(d.jsx)(v.Layout,{size:{x:7,y:7},flat:!0,origin:{x:0,y:0},children:s.map((function(e){return Object(d.jsx)(v.Hexagon,{className:x()({"color-1":2===e.value,"color-2":4===e.value,"color-3":8===e.value,"color-4":16===e.value,"color-5":32===e.value,"color-6":64===e.value,"color-7":128===e.value,"color-8":256===e.value,"color-9":512===e.value,"color-10":1024===e.value,"color-11":2048===e.value}),q:e.x,r:e.z,s:e.y,children:Object(d.jsx)("g",{"data-x":e.x,"data-y":e.y,"data-z":e.z,"data-value":e.value,children:Object(d.jsx)(v.Text,{className:x()({"color-text-1":2===e.value||4===e.value,"color-text-2":2!==e.value&&4!==e.value}),children:e.value})})})}))})})})]})]})};n(34);u.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(f,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.9052845e.chunk.js.map